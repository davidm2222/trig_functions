<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trig Visualizer Enhanced</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      margin: 0;
      padding: 30px;
      background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: radial-gradient(circle at 20% 50%, rgba(102, 126, 234, 0.1) 0%, transparent 50%),
                  radial-gradient(circle at 80% 80%, rgba(236, 72, 153, 0.1) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(20px);
      border-radius: 24px;
      padding: 40px;
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.4),
                  inset 0 1px 0 0 rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.1);
      position: relative;
      z-index: 1;
    }

    h1 {
      margin: 0 0 35px 0;
      color: #ffffff;
      font-size: 2.5em;
      font-weight: 700;
      text-align: center;
      background: linear-gradient(135deg, #667eea 0%, #ec4899 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: -0.5px;
    }

    .main-layout {
      display: grid;
      grid-template-columns: 1fr 380px;
      gap: 35px;
      margin-bottom: 20px;
    }

    .controls-section {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      padding: 25px;
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
    }

    .slider-control {
      margin-bottom: 25px;
    }

    .slider-control label {
      display: block;
      font-weight: 600;
      color: #e0e7ff;
      margin-bottom: 12px;
      font-size: 1em;
    }

    #theta {
      width: 100%;
      height: 10px;
      border-radius: 5px;
      outline: none;
      -webkit-appearance: none;
      background: rgba(255, 255, 255, 0.1);
      position: relative;
    }

    #theta::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 0 20px rgba(102, 126, 234, 0.6),
                  0 4px 8px rgba(0, 0, 0, 0.3);
    }

    #theta::-webkit-slider-thumb:hover {
      transform: scale(1.3);
      box-shadow: 0 0 30px rgba(102, 126, 234, 0.9),
                  0 6px 12px rgba(0, 0, 0, 0.4);
    }

    #theta::-moz-range-thumb {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      cursor: pointer;
      border: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 0 20px rgba(102, 126, 234, 0.6),
                  0 4px 8px rgba(0, 0, 0, 0.3);
    }

    #thetaValue {
      display: inline-block;
      font-weight: 700;
      color: #667eea;
      font-size: 1.5em;
      margin-left: 10px;
      text-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
    }

    .preset-angles {
      margin: 25px 0;
    }

    .preset-angles h3 {
      font-size: 0.85em;
      font-weight: 700;
      color: #a5b4fc;
      margin: 0 0 12px 0;
      text-transform: uppercase;
      letter-spacing: 1.5px;
    }

    .angle-buttons {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }

    .angle-buttons button {
      padding: 12px;
      border: 1px solid rgba(102, 126, 234, 0.3);
      background: rgba(102, 126, 234, 0.1);
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      color: #e0e7ff;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-size: 0.95em;
      backdrop-filter: blur(5px);
    }

    .angle-buttons button:hover {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-color: rgba(102, 126, 234, 0.5);
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4),
                  0 0 20px rgba(102, 126, 234, 0.3);
    }

    .checkboxes {
      margin: 25px 0;
    }

    .checkboxes h3 {
      font-size: 0.85em;
      font-weight: 700;
      color: #a5b4fc;
      margin: 0 0 12px 0;
      text-transform: uppercase;
      letter-spacing: 1.5px;
    }

    .checkboxes label {
      display: block;
      padding: 12px 14px;
      margin-bottom: 8px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid rgba(255, 255, 255, 0.1);
      font-weight: 500;
      color: #e0e7ff;
      backdrop-filter: blur(5px);
    }

    .checkboxes label:hover {
      border-color: rgba(102, 126, 234, 0.5);
      background: rgba(102, 126, 234, 0.15);
      transform: translateX(3px);
    }

    .checkboxes input[type="checkbox"] {
      margin-right: 10px;
      cursor: pointer;
      accent-color: #667eea;
    }

    .animation-controls {
      margin: 25px 0;
      padding: 20px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(5px);
    }

    .animation-controls h3 {
      font-size: 0.85em;
      font-weight: 700;
      color: #a5b4fc;
      margin: 0 0 12px 0;
      text-transform: uppercase;
      letter-spacing: 1.5px;
    }

    #playPause {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-size: 1.05em;
      margin-bottom: 12px;
      box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
    }

    #playPause:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(16, 185, 129, 0.6),
                  0 0 30px rgba(16, 185, 129, 0.3);
    }

    #playPause.playing {
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
    }

    #playPause.playing:hover {
      box-shadow: 0 6px 20px rgba(239, 68, 68, 0.6),
                  0 0 30px rgba(239, 68, 68, 0.3);
    }

    .speed-control {
      margin-top: 12px;
    }

    .speed-control label {
      display: block;
      font-size: 0.85em;
      color: #a5b4fc;
      margin-bottom: 8px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .speed-buttons {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
    }

    .speed-buttons button {
      padding: 10px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      cursor: pointer;
      font-size: 0.85em;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-weight: 500;
      color: #cbd5e1;
      backdrop-filter: blur(5px);
    }

    .speed-buttons button.active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-color: rgba(102, 126, 234, 0.5);
      box-shadow: 0 0 15px rgba(102, 126, 234, 0.4);
    }

    .speed-buttons button:hover {
      border-color: rgba(102, 126, 234, 0.5);
      background: rgba(102, 126, 234, 0.2);
    }

    .ratio-display {
      background: rgba(255, 255, 255, 0.05);
      padding: 20px;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      margin-top: 25px;
      backdrop-filter: blur(5px);
    }

    .ratio-display h3 {
      font-size: 0.85em;
      font-weight: 700;
      color: #a5b4fc;
      margin: 0 0 12px 0;
      text-transform: uppercase;
      letter-spacing: 1.5px;
    }

    .ratio-item {
      font-family: 'Courier New', monospace;
      font-size: 0.85em;
      padding: 10px 12px;
      margin: 8px 0;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 8px;
      border-left: 4px solid;
      color: #e0e7ff;
      backdrop-filter: blur(5px);
    }

    .ratio-item.sin {
      border-left-color: #ff6b9d;
      box-shadow: 0 0 15px rgba(255, 107, 157, 0.2);
    }
    .ratio-item.cos {
      border-left-color: #4f9dff;
      box-shadow: 0 0 15px rgba(79, 157, 255, 0.2);
    }
    .ratio-item.tan {
      border-left-color: #10b981;
      box-shadow: 0 0 15px rgba(16, 185, 129, 0.2);
    }

    .canvas-container {
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 25px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
    }

    canvas {
      display: block;
      margin: 0 auto;
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.6);
    }

    #plot {
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3),
                  inset 0 0 60px rgba(0, 0, 0, 0.2);
    }

    .circle-section {
      margin-top: 25px;
    }

    #circle {
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3),
                  inset 0 0 60px rgba(0, 0, 0, 0.2);
    }

    .legend {
      display: flex;
      gap: 25px;
      margin-top: 20px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 0.95em;
      font-weight: 600;
      color: #e0e7ff;
      padding: 8px 14px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .legend-color {
      width: 28px;
      height: 5px;
      border-radius: 3px;
      box-shadow: 0 0 10px currentColor;
    }

    .legend-color.sin {
      background: #ff6b9d;
      box-shadow: 0 0 15px rgba(255, 107, 157, 0.6);
    }
    .legend-color.cos {
      background: #4f9dff;
      box-shadow: 0 0 15px rgba(79, 157, 255, 0.6);
    }
    .legend-color.tan {
      background: #10b981;
      box-shadow: 0 0 15px rgba(16, 185, 129, 0.6);
    }

    /* Custom scrollbar for webkit browsers */
    ::-webkit-scrollbar {
      width: 10px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(102, 126, 234, 0.5);
      border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(102, 126, 234, 0.7);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Trig Function Visualizer</h1>

    <div class="main-layout">
      <div class="canvas-container">
        <canvas id="plot" width="700" height="350"></canvas>
        <div class="legend">
          <div class="legend-item" id="legendSin" style="display: none;">
            <div class="legend-color sin"></div>
            <span>sin(θ)</span>
          </div>
          <div class="legend-item" id="legendCos" style="display: none;">
            <div class="legend-color cos"></div>
            <span>cos(θ)</span>
          </div>
          <div class="legend-item" id="legendTan" style="display: none;">
            <div class="legend-color tan"></div>
            <span>tan(θ)</span>
          </div>
        </div>

        <div class="circle-section">
          <canvas id="circle" width="350" height="350"></canvas>
        </div>
      </div>

      <div class="controls-section">
        <div class="slider-control">
          <label for="theta">Angle: <span id="thetaValue">45</span>°</label>
          <input type="range" id="theta" min="0" max="360" value="45">
        </div>

        <div class="preset-angles">
          <h3>Special Angles</h3>
          <div class="angle-buttons">
            <button onclick="setTheta(0)">0°</button>
            <button onclick="setTheta(30)">30°</button>
            <button onclick="setTheta(45)">45°</button>
            <button onclick="setTheta(60)">60°</button>
            <button onclick="setTheta(90)">90°</button>
            <button onclick="setTheta(180)">180°</button>
            <button onclick="setTheta(270)">270°</button>
            <button onclick="setTheta(360)">360°</button>
          </div>
        </div>

        <div class="checkboxes">
          <h3>Show Functions</h3>
          <label>
            <input type="checkbox" id="showSin" checked> sin(θ) - Red
          </label>
          <label>
            <input type="checkbox" id="showCos" checked> cos(θ) - Blue
          </label>
          <label>
            <input type="checkbox" id="showTan" checked> tan(θ) - Green
          </label>
        </div>

        <div class="animation-controls">
          <h3>Animation</h3>
          <button id="playPause">▶ Play</button>
          <div class="speed-control">
            <label>Speed:</label>
            <div class="speed-buttons">
              <button onclick="setSpeed(40)" id="speedSlow">Slow</button>
              <button onclick="setSpeed(20)" id="speedMed" class="active">Medium</button>
              <button onclick="setSpeed(10)" id="speedFast">Fast</button>
            </div>
          </div>
        </div>

        <div class="ratio-display">
          <h3>Ratio Calculations</h3>
          <div id="ratioCalculations"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const canvas = document.getElementById("plot");
    const ctx = canvas.getContext("2d");
    const circleCanvas = document.getElementById("circle");
    const circleCtx = circleCanvas.getContext("2d");

    const thetaInput = document.getElementById("theta");
    const thetaValue = document.getElementById("thetaValue");
    const showSin = document.getElementById("showSin");
    const showCos = document.getElementById("showCos");
    const showTan = document.getElementById("showTan");
    const playPauseBtn = document.getElementById("playPause");
    const ratioDisplay = document.getElementById("ratioCalculations");

    const width = canvas.width;
    const height = canvas.height;
    const padding = 50;

    let isPlaying = false;
    let animationInterval = null;
    let animationSpeed = 20; // milliseconds per degree

    function setTheta(val) {
      thetaInput.value = val;
      thetaValue.textContent = val;
      drawPlot();
    }

    function setSpeed(speed) {
      animationSpeed = speed;
      document.querySelectorAll('.speed-buttons button').forEach(btn => btn.classList.remove('active'));
      if (speed === 40) document.getElementById('speedSlow').classList.add('active');
      if (speed === 20) document.getElementById('speedMed').classList.add('active');
      if (speed === 10) document.getElementById('speedFast').classList.add('active');

      if (isPlaying) {
        stopAnimation();
        startAnimation();
      }
    }

    function toggleAnimation() {
      if (isPlaying) {
        stopAnimation();
      } else {
        startAnimation();
      }
    }

    function startAnimation() {
      isPlaying = true;
      playPauseBtn.textContent = '⏸ Pause';
      playPauseBtn.classList.add('playing');

      animationInterval = setInterval(() => {
        let currentTheta = parseInt(thetaInput.value);
        currentTheta = (currentTheta + 1) % 361;
        setTheta(currentTheta);
      }, animationSpeed);
    }

    function stopAnimation() {
      isPlaying = false;
      playPauseBtn.textContent = '▶ Play';
      playPauseBtn.classList.remove('playing');
      if (animationInterval) {
        clearInterval(animationInterval);
        animationInterval = null;
      }
    }

    playPauseBtn.addEventListener('click', toggleAnimation);

    function drawPlot() {
      ctx.clearRect(0, 0, width, height);
      drawAxes();
      drawGridLines();

      if (showTan.checked) drawFunction(Math.tan, "#10b981", true);
      if (showCos.checked) drawFunction(Math.cos, "#4f9dff");
      if (showSin.checked) drawFunction(Math.sin, "#ff6b9d");

      drawThetaLine();
      drawCurrentPoints();
      drawUnitCircle();
      updateRatios();
      updateLegend();
    }

    function drawAxes() {
      ctx.strokeStyle = "#94a3b8";
      ctx.lineWidth = 2;
      ctx.shadowBlur = 0;

      // X-axis
      ctx.beginPath();
      ctx.moveTo(padding, height / 2);
      ctx.lineTo(width - padding, height / 2);
      ctx.stroke();

      // Y-axis
      ctx.beginPath();
      ctx.moveTo(padding, padding);
      ctx.lineTo(padding, height - padding);
      ctx.stroke();

      ctx.fillStyle = "#cbd5e1";
      ctx.font = "bold 13px sans-serif";

      // Y-axis labels
      for (let i = -1; i <= 1; i += 0.5) {
        if (i === 0) continue;
        const y = height / 2 - i * 100;
        ctx.beginPath();
        ctx.moveTo(padding - 5, y);
        ctx.lineTo(padding + 5, y);
        ctx.stroke();
        ctx.fillText(i.toFixed(1), padding - 35, y + 4);
      }

      // X-axis labels
      for (let deg = 0; deg <= 360; deg += 90) {
        const x = padding + (deg / 360) * (width - 2 * padding);
        ctx.beginPath();
        ctx.moveTo(x, height / 2 - 5);
        ctx.lineTo(x, height / 2 + 5);
        ctx.stroke();
        ctx.fillText(deg + "°", x - 10, height / 2 + 25);
      }
    }

    function drawGridLines() {
      ctx.strokeStyle = "rgba(148, 163, 184, 0.2)";
      ctx.lineWidth = 1;
      ctx.shadowBlur = 0;

      // Vertical grid lines at key angles
      for (let deg = 90; deg <= 270; deg += 90) {
        const x = padding + (deg / 360) * (width - 2 * padding);
        ctx.beginPath();
        ctx.setLineDash([5, 5]);
        ctx.moveTo(x, padding);
        ctx.lineTo(x, height - padding);
        ctx.stroke();
        ctx.setLineDash([]);
      }
    }

    function drawFunction(fn, color, isTan = false) {
      ctx.strokeStyle = color;
      ctx.lineWidth = 3;

      // Add glow effect
      ctx.shadowBlur = 15;
      ctx.shadowColor = color;

      ctx.beginPath();
      let started = false;

      for (let deg = 0; deg <= 360; deg++) {
        const rad = (deg * Math.PI) / 180;
        let y = fn(rad);

        if (isTan && Math.abs(y) > 3) {
          started = false;
          continue;
        }

        const x = padding + (deg / 360) * (width - 2 * padding);
        y = height / 2 - y * 100;

        if (!started) {
          ctx.moveTo(x, y);
          started = true;
        } else {
          ctx.lineTo(x, y);
        }
      }
      ctx.stroke();

      // Reset shadow
      ctx.shadowBlur = 0;
    }

    function drawThetaLine() {
      const theta = parseInt(thetaInput.value);
      const x = padding + (theta / 360) * (width - 2 * padding);

      ctx.strokeStyle = "#a78bfa";
      ctx.lineWidth = 2;
      ctx.shadowBlur = 10;
      ctx.shadowColor = "#a78bfa";
      ctx.setLineDash([5, 5]);
      ctx.beginPath();
      ctx.moveTo(x, padding);
      ctx.lineTo(x, height - padding);
      ctx.stroke();
      ctx.setLineDash([]);
      ctx.shadowBlur = 0;
    }

    function drawCurrentPoints() {
      const theta = parseInt(thetaInput.value);
      const rad = (theta * Math.PI) / 180;
      const x = padding + (theta / 360) * (width - 2 * padding);

      if (showSin.checked) {
        const ySin = height / 2 - Math.sin(rad) * 100;
        ctx.fillStyle = "#ff6b9d";
        ctx.shadowBlur = 15;
        ctx.shadowColor = "#ff6b9d";
        ctx.beginPath();
        ctx.arc(x, ySin, 7, 0, 2 * Math.PI);
        ctx.fill();
      }

      if (showCos.checked) {
        const yCos = height / 2 - Math.cos(rad) * 100;
        ctx.fillStyle = "#4f9dff";
        ctx.shadowBlur = 15;
        ctx.shadowColor = "#4f9dff";
        ctx.beginPath();
        ctx.arc(x, yCos, 7, 0, 2 * Math.PI);
        ctx.fill();
      }

      if (showTan.checked) {
        const tanVal = Math.tan(rad);
        if (Math.abs(tanVal) < 3) {
          const yTan = height / 2 - tanVal * 100;
          ctx.fillStyle = "#10b981";
          ctx.shadowBlur = 15;
          ctx.shadowColor = "#10b981";
          ctx.beginPath();
          ctx.arc(x, yTan, 7, 0, 2 * Math.PI);
          ctx.fill();
        }
      }

      ctx.shadowBlur = 0;
    }

    function drawUnitCircle() {
      const centerX = 175;
      const centerY = 175;
      const radius = 130;
      const theta = parseInt(thetaInput.value);
      const rad = (theta * Math.PI) / 180;

      circleCtx.clearRect(0, 0, 350, 350);

      // Draw axes
      circleCtx.strokeStyle = "rgba(148, 163, 184, 0.4)";
      circleCtx.lineWidth = 1.5;
      circleCtx.shadowBlur = 0;
      circleCtx.beginPath();
      circleCtx.moveTo(0, centerY);
      circleCtx.lineTo(350, centerY);
      circleCtx.moveTo(centerX, 0);
      circleCtx.lineTo(centerX, 350);
      circleCtx.stroke();

      // Label axes with degree markers
      circleCtx.fillStyle = "#94a3b8";
      circleCtx.font = "bold 14px sans-serif";
      circleCtx.fillText("0°", centerX + radius + 10, centerY + 5);
      circleCtx.fillText("90°", centerX - 15, centerY - radius - 10);
      circleCtx.fillText("180°", centerX - radius - 35, centerY + 5);
      circleCtx.fillText("270°", centerX - 15, centerY + radius + 20);

      // Draw circle with glow
      circleCtx.strokeStyle = "#94a3b8";
      circleCtx.lineWidth = 2;
      circleCtx.shadowBlur = 10;
      circleCtx.shadowColor = "#667eea";
      circleCtx.beginPath();
      circleCtx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
      circleCtx.stroke();
      circleCtx.shadowBlur = 0;

      const x = centerX + radius * Math.cos(rad);
      const y = centerY - radius * Math.sin(rad);

      // Draw angle arc
      circleCtx.strokeStyle = "#a78bfa";
      circleCtx.lineWidth = 2;
      circleCtx.shadowBlur = 10;
      circleCtx.shadowColor = "#a78bfa";
      circleCtx.beginPath();
      circleCtx.arc(centerX, centerY, 30, 0, -rad, true);
      circleCtx.stroke();
      circleCtx.shadowBlur = 0;

      // Draw radius (hypotenuse)
      circleCtx.strokeStyle = "#a78bfa";
      circleCtx.lineWidth = 3;
      circleCtx.shadowBlur = 12;
      circleCtx.shadowColor = "#a78bfa";
      circleCtx.beginPath();
      circleCtx.moveTo(centerX, centerY);
      circleCtx.lineTo(x, y);
      circleCtx.stroke();
      circleCtx.shadowBlur = 0;

      // Draw cos (adjacent) - horizontal line
      if (showCos.checked) {
        circleCtx.strokeStyle = "#4f9dff";
        circleCtx.lineWidth = 5;
        circleCtx.shadowBlur = 15;
        circleCtx.shadowColor = "#4f9dff";
        circleCtx.beginPath();
        circleCtx.moveTo(centerX, centerY);
        circleCtx.lineTo(x, centerY);
        circleCtx.stroke();
        circleCtx.shadowBlur = 0;

        // Label
        circleCtx.fillStyle = "#4f9dff";
        circleCtx.font = "bold 13px sans-serif";
        circleCtx.shadowBlur = 5;
        circleCtx.shadowColor = "#4f9dff";
        const cosLabelX = centerX + (x - centerX) / 2;
        circleCtx.fillText("adjacent (cos)", cosLabelX - 40, centerY + (y > centerY ? -10 : 20));
        circleCtx.shadowBlur = 0;
      }

      // Draw sin (opposite) - vertical line
      if (showSin.checked) {
        circleCtx.strokeStyle = "#ff6b9d";
        circleCtx.lineWidth = 5;
        circleCtx.shadowBlur = 15;
        circleCtx.shadowColor = "#ff6b9d";
        circleCtx.beginPath();
        circleCtx.moveTo(x, centerY);
        circleCtx.lineTo(x, y);
        circleCtx.stroke();
        circleCtx.shadowBlur = 0;

        // Label
        circleCtx.fillStyle = "#ff6b9d";
        circleCtx.font = "bold 13px sans-serif";
        circleCtx.shadowBlur = 5;
        circleCtx.shadowColor = "#ff6b9d";
        const sinLabelY = centerY + (y - centerY) / 2;
        circleCtx.fillText("opposite (sin)", x + 10, sinLabelY);
        circleCtx.shadowBlur = 0;
      }

      // Label radius
      circleCtx.fillStyle = "#c4b5fd";
      circleCtx.font = "bold 13px sans-serif";
      circleCtx.shadowBlur = 5;
      circleCtx.shadowColor = "#a78bfa";
      const radiusLabelX = centerX + (x - centerX) / 2 - 20;
      const radiusLabelY = centerY + (y - centerY) / 2 + 20;
      circleCtx.fillText("radius = 1", radiusLabelX, radiusLabelY);
      circleCtx.shadowBlur = 0;

      // Draw point on circle
      circleCtx.fillStyle = "#c4b5fd";
      circleCtx.shadowBlur = 15;
      circleCtx.shadowColor = "#a78bfa";
      circleCtx.beginPath();
      circleCtx.arc(x, y, 7, 0, 2 * Math.PI);
      circleCtx.fill();
      circleCtx.shadowBlur = 0;

      // Display coordinates
      circleCtx.fillStyle = "#e0e7ff";
      circleCtx.font = "bold 14px sans-serif";
      const cosVal = Math.cos(rad).toFixed(3);
      const sinVal = Math.sin(rad).toFixed(3);
      circleCtx.fillText(`(${cosVal}, ${sinVal})`, x + 10, y - 10);
    }

    function updateRatios() {
      const theta = parseInt(thetaInput.value);
      const rad = (theta * Math.PI) / 180;
      const sinVal = Math.sin(rad);
      const cosVal = Math.cos(rad);
      const tanVal = Math.tan(rad);

      let html = '';

      if (showSin.checked) {
        html += `<div class="ratio-item sin">sin(${theta}°) = opposite/radius = ${sinVal.toFixed(3)}/1.000 = ${sinVal.toFixed(3)}</div>`;
      }

      if (showCos.checked) {
        html += `<div class="ratio-item cos">cos(${theta}°) = adjacent/radius = ${cosVal.toFixed(3)}/1.000 = ${cosVal.toFixed(3)}</div>`;
      }

      if (showTan.checked) {
        if (Math.abs(tanVal) < 100) {
          html += `<div class="ratio-item tan">tan(${theta}°) = opposite/adjacent = ${sinVal.toFixed(3)}/${cosVal.toFixed(3)} = ${tanVal.toFixed(3)}</div>`;
        } else {
          html += `<div class="ratio-item tan">tan(${theta}°) = undefined (adjacent = 0)</div>`;
        }
      }

      ratioDisplay.innerHTML = html || '<div style="color: #a0aec0; font-style: italic;">Select functions to see ratios</div>';
    }

    function updateLegend() {
      document.getElementById('legendSin').style.display = showSin.checked ? 'flex' : 'none';
      document.getElementById('legendCos').style.display = showCos.checked ? 'flex' : 'none';
      document.getElementById('legendTan').style.display = showTan.checked ? 'flex' : 'none';
    }

    thetaInput.addEventListener("input", () => {
      thetaValue.textContent = thetaInput.value;
      drawPlot();
    });

    showSin.addEventListener("change", drawPlot);
    showCos.addEventListener("change", drawPlot);
    showTan.addEventListener("change", drawPlot);

    drawPlot();
  </script>
</body>
</html>
